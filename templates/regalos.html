<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <link
      rel="icon"
      href="https://vineethtr.000webhostapp.com/wp-content/uploads/2018/01/logo.png"
      sizes="192x192"
    />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link
      rel="apple-touch-icon-precomposed"
      href="https://vineethtr.000webhostapp.com/wp-content/uploads/2018/01/logo.png"
    />
    <meta
      name="msapplication-TileImage"
      content="https://vineethtr.000webhostapp.com/wp-content/uploads/2018/01/logo.png"
    />
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>C&E - Regalos</title>

    <script type="text/javascript">
      // Redirección rápida basada en el userAgent
      (function () {
        if (!/Mobi|Tablet|iPad|Android/i.test(navigator.userAgent)) {
          // El usuario está usando una PC
          window.location.href = "/pc";
        }
      })();
    </script>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style media="screen">
      .no-select {
        -webkit-user-select: none; /* Chrome, Safari, Opera */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox */
      }

      * {
        margin: 0;
        padding: 0;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
      }

      a {
        color: #03658c;
        text-decoration: none;
      }

      ul {
        list-style-type: none;
      }

      body {
        font-family: "Montserrat", Arial, Helvetica, Sans-serif, Verdana;
        background-image: url('/static/images/fondo-ubicacion.png');
            background-size: 100% 100%; /* Estira la imagen para cubrir el ancho y alto completos */
            background-repeat: no-repeat;
            background-attachment: fixed; /* Opcional, para que la imagen no se desplace con el contenido */
            margin: 0;
            padding: 0;
            overflow: hidden; /* Evita desbordamientos accidentales */
      }
      .header {
        text-align: center;
        margin-top: 30px;
      }
      .titulo{
        text-transform: uppercase;
        font-weight: 700;
        font-size: 2.5rem;
        letter-spacing: 0.2rem;
        color: #1c1a1a;
        
      }
      .text-crimson{
        color: crimson;
      }
      .cards{
        display: flex;
        width: 100%;
        height: 26rem;
        padding-top: 8%;
        flex-direction: column;
        gap: 15px;
        padding-left: 6px;
      }
      .cards2{
        display: flex;
        width: 100%;
        height: 26rem;
        padding-top: 5%;
        flex-direction: column;
        gap: 6px;
        padding-left: 6px;
        font-family: 'Material Symbols Outlined';
      }
      .cards-title{
        text-transform: uppercase;
        font-size: 26px;
        padding-left: 16px;
      }
      .cards-description{
        display: flex;
        height: 100%;
        align-items: center;
        justify-content: space-between;
        padding-left: 8px;
        padding-right: 8px;
        margin-top: 10px;
        
      }
      .card-description-text{
        text-transform: uppercase;
        font-size: 15px;
        letter-spacing: 0.1rem;
        padding-top: 8px;
      }
      .card-description-button{
        width: 50%;
        height: 40px;
        border-radius: 5px;
        font-size: 15px;
        background: #9f2c33;
        color: white;
      }
      .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-10px);
            background-color: rgba(208, 134, 134);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            display: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.5s ease;
            animation: bounce 1s ease;
            width: auto !important;
        }
        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(208, 134, 134) transparent transparent transparent;
        }
        #loadingSpinner {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, .95);
        z-index: 2000;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .loader {
        border: 6px solid #f3f3f3; /* Light grey */
        border-top: 6px solid #9f2c33; 
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 2s linear infinite;
    }
    

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
   

      /** =====================
 * Responsive
 ========================*/
      @media only screen and (max-width: 766px) {
        .comments-container {
          width: 100%;
        }

        .comments-list .comment-box {
          width: 100%;
        }

        .reply-list .comment-box {
          width: 100%;
        }
      }

      
      #swal2-input:focus {
        outline: none; /* Elimina el borde por defecto */
        border-color: #9f2c33; /* Cambia el color del borde al enfocar */
        box-shadow: 0 0 5px rgba(208, 134, 134, 0.575); /* Añade una sombra de color*/
      }

      .svg-item {
        width: 100%;
        font-size: 16px;
        margin: 0 auto;
        animation: donutfade 1s;
      }

      @keyframes donutfade {
        0% {
          opacity: 0.2;
        }
        100% {
          opacity: 1;
        }
      }

      .donut-ring {
        stroke: var(--bs-info);
      }

      .donut-segment {
        transform-origin: center;
      }

      .donut-segment-primary {
        stroke: var(--bs-primary);
        animation: donut-animation 3s;
      }

      .donut-text {
        font-family: Arial, Helvetica, sans-serif;
        fill: var(--bs-primary);
      }

      .donut-percent {
        font-size: 0.5em;
        line-height: 1;
        transform: translateY(0.5em);
        font-weight: bold;
      }

      

      .svg-item {
        max-width: 60%;
        display: inline-block;
      }
      /* El contenedor que contiene la lista de regalos */
    .gift-list-container {
            flex-grow: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding-top: 1rem;
        }
        .gift-list-container .row {
            margin-bottom: 1rem;
        }
        .donate{
          cursor: pointer;
        }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/ScrollTrigger.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
      rel="stylesheet"
    />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@latest"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/toastr/build/toastr.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/toastr/build/toastr.min.js"></script>
    <meta name="google" content="notranslate" />
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
  </head>

  <body style="background-color: black; overflow: hidden !important">
    <div>
      <div class="header">
          <h1 class="titulo">Lista de Regalos</h1>
      </div>
      <div class="cards-2 gift-list-container" style="" >
        <div class="row">
          <div class="col-8" data-gift-id="microondas">

            <div class="container" >
              <div class="row">
                <div class="col-7" >

                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/1.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $300.000
                        </p>
                      </div>
                    </div>
                  </div>

                                
                </div>

                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;" onclick="openDonationModal('microondas')">
                    
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;" >
                      DONAR
                    </span>
                  </div>
                </div>


              </div>
            </div>

          </div>
          <div class="col-4 donut-container" data-gift-donut-id="microondas" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>



          <div class="col-8" data-gift-id="mesa">

            <div class="container" >
              <div class="row">
                <div class="col-7" >

                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/2.png" class="rounded" alt="..." width="100px" height="">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $700.000
                        </p>
                      </div>
                    </div>
                  </div>

                                
                </div>

                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('mesa')">
                    
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
                

              </div>
            </div>

          </div>
          <div class="col-4 donut-container" data-gift-donut-id="mesa" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>





          <div class="col-8" data-gift-id="cafetera">

            <div class="container" >
              <div class="row">
                <div class="col-7" >

                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/3.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $290.000
                        </p>
                      </div>
                    </div>
                  </div>

                                
                </div>

                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('cafetera')">
                    
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
                

              </div>
            </div>

          </div>
          <div class="col-4 donut-container" data-gift-donut-id="cafetera" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>


          <div class="col-8" data-gift-id="heladera">

            <div class="container" >
              <div class="row">
                <div class="col-7" >

                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/4.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $1.250.000
                        </p>
                      </div>
                    </div>
                  </div>

                                
                </div>

                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('heladera')">
                    
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
                

              </div>
            </div>

          </div>
          <div class="col-4 donut-container" data-gift-donut-id="heladera" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>



          <div class="col-8" data-gift-id="freezer">

            <div class="container" >
              <div class="row">
                <div class="col-7" >

                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/5.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $900.000
                        </p>
                      </div>
                    </div>
                  </div>

                                
                </div>

                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('freezer')">
                    
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
                

              </div>
            </div>

          </div>
          <div class="col-4 donut-container" data-gift-donut-id="freezer" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>



          <div class="col-8" data-gift-id="minipimer">

            <div class="container" >
              <div class="row">
                <div class="col-7" >

                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/6.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $120.000
                        </p>
                      </div>
                    </div>
                  </div>

                                
                </div>

                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('minipimer')">
                    
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
                

              </div>
            </div>

          </div>
          <div class="col-4 donut-container" data-gift-donut-id="minipimer" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>



          <div class="col-8" data-gift-id="licuadora">
            <div class="container" >
              <div class="row">
                <div class="col-7" >
                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/7.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $250.000
                        </p>
                      </div>
                    </div>
                  </div>        
                </div>
                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('licuadora')">
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-4 donut-container" data-gift-donut-id="licuadora" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>
          <div class="col-8" data-gift-id="sandwichera">
            <div class="container" >
              <div class="row">
                <div class="col-7" >
                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/8.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $110.000
                        </p>
                      </div>
                    </div>
                  </div>        
                </div>
                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('sandwichera')">
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-4 donut-container" data-gift-donut-id="sandwichera" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>
          <div class="col-8" data-gift-id="secadora">
            <div class="container" >
              <div class="row">
                <div class="col-7" >
                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/9.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $250.000
                        </p>
                      </div>
                    </div>
                  </div>        
                </div>
                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('secadora)">
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-4 donut-container" data-gift-donut-id="secadora" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>
          <div class="col-8" data-gift-id="cocina">
            <div class="container" >
              <div class="row">
                <div class="col-7" >
                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/10.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $1.220.000
                        </p>
                      </div>
                    </div>
                  </div>        
                </div>
                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('cocina')">
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-4 donut-container" data-gift-donut-id="cocina" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>
          <div class="col-8" data-gift-id="tostadora">
            <div class="container" >
              <div class="row">
                <div class="col-7" >
                  <div class="row">
                    <div class="col-12" style="display: flex; justify-content: flex-end;">
                      <div style="text-align: center;">
                        <img src="static/regalos/11.png" class="rounded" alt="..." width="100px" height="100px">
                        <p class="price" style="font-weight: bold; margin-top: 0.5rem;">
                          $110.000
                        </p>
                      </div>
                    </div>
                  </div>        
                </div>
                <div class="col-5" style="justify-content: center; align-items:center; display:flex;">
                  <div style="border:solid 1px; padding-right: .8rem; margin-top:-4rem; padding-top: .2rem; padding-bottom: .2rem; border-top-left-radius: 1.5rem; border-bottom-left-radius: 1.5rem; display: flex; align-items: center;"onclick="openDonationModal('tostadora')">
                    <i class="fa fa-heart bg-dark text-crimson float-end" aria-hidden="true" 
                      style="border-radius: 50%; font-size:1.2rem; padding:.29rem; margin-left: 1px;"></i>
                      <span class="donate" style="margin-left: .5rem; font-weight: bold;">
                      DONAR
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-4 donut-container" data-gift-donut-id="tostadora" style="justify-content: center; align-items:center; display:flex;">
            <div class="svg-item" style="margin-top:-4rem">
              <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"></circle>
                <circle class="donut-segment donut-segment-primary" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5" stroke-dasharray="0 100" stroke-dashoffset="25"></circle>
                <g class="donut-text donut-text-primary">
                  <text y="50%" transform="translate(0, 2)">
                    <tspan x="50%" text-anchor="middle" class="donut-percent">0%</tspan>
                  </text>
                </g>
              </svg>
            </div>
          </div>

        </div>
      </div>
  </div>
   
    <!-- Menu -->
    <div class="card" style="position: fixed; bottom: 0px; padding: 1rem; width: 100%;">
      <div class="row" style="justify-content: space-evenly;">
          <div class="col-2 d-flex justify-content-center" style="text-align: center;" id="" data-bs-toggle="modal" data-bs-target="#eventInfoModal" onclick="showHome()">
              <div style="position: relative; width: 50px; height: 50px; display: flex; justify-content: center; padding-top:.7rem;">
                  <span class="material-symbols-outlined no-select" style="font-size: 2.7rem; color:#9f2c33;">home</span>
                  <div class="tooltip" style="width:4.3rem !important;">Busca info sobre el evento.
                      <div class="tooltip-arrow"></div>
                  </div>
              </div>
          </div>
          
          <div class="col-2 d-flex justify-content-center" style="text-align: center;" id="" onclick="showLocation()">
              <div style="position: relative; width: 50px; height: 50px; display: flex; justify-content: center; padding-top:.7rem">
                  <span class="material-symbols-outlined no-select" style="font-size: 2.7rem; color:#9f2c33">map</span>
                  <div class="tooltip">Abrí la Ubicación del salon<div class="tooltip-arrow"></div>
                  </div>
              </div>
          </div>
            <!-- Button to open Donation Modal -->
          <div class="col-2 d-flex justify-content-center" style="text-align: center;" data-bs-toggle="modal" data-bs-target="#donationModal" onclick="showGifts()">
            <div style="position: relative; width: 50px; height: 50px;display: flex;justify-content: center; padding-top:.7rem">
              <span class="material-symbols-outlined no-select" style="font-size: 2.7rem; color:#9f2c33">featured_seasonal_and_gifts</span>
              <div class="tooltip" style="width:7rem !important">Envianos $$ <i class="material-symbols-outlined no-select float-end" style="font-size:.9rem; margin-top:.2rem">sentiment_very_satisfied</i>
                <div class="tooltip-arrow"></div>
              </div>
            </div>
          </div>
          <div class="col-2 d-flex justify-content-center" style="text-align: center;" id="galery" onclick="showGallery()">
            <div style="position: relative; width: 50px; height: 50px; display: flex; justify-content: center; padding-top:.7rem">
                <span class="material-symbols-outlined no-select" style="font-size: 2.7rem; color:#9f2c33">photo_library</span>
                <div class="tooltip" style="width:5rem !important">Mira todas las fotos.
                    <div class="tooltip-arrow"></div>
                </div>
            </div>
        </div>
  <!--         <div class="col-2 d-flex justify-content-center" style="text-align: center;" id="locationButtonIglesia">
              <div style="position: relative; width: 50px; height: 50px;display:flex;justify-content: center; padding-top:.7rem">
                  <span class="material-symbols-outlined no-select" style="font-size: 1.7rem; color:#9f2c33">church</span>
                  <div class="tooltip" style="width:6rem !important">Abrí la Ubicacion de la iglesia
                      <div class="tooltip-arrow"></div>
                  </div>
              </div>
          </div> -->
          <div class="col-2 d-flex justify-content-center" style="text-align: center; cursor: pointer;" id="uploadTrigger">
              <div style="position: relative;background-color:#9f2c33; width: 45px; height: 45px; border-radius: 10%; display: flex; justify-content: center; align-items: center;box-shadow: rgba(0, 0, 0, 0.07) 0px 1px 2px, rgba(0, 0, 0, 0.07) 0px 2px 4px, rgba(0, 0, 0, 0.07) 0px 4px 8px, rgba(0, 0, 0, 0.07) 0px 8px 16px, rgba(0, 0, 0, 0.07) 0px 16px 32px, rgba(0, 0, 0, 0.07) 0px 32px 64px;">
                  <span class="material-symbols-outlined no-select" style="font-size: 2.5rem; color: white;">add_a_photo</span>
                  <div class="tooltip">Subí tu foto al evento!
                      <div class="tooltip-arrow"></div>|
                  </div>
              </div>
          </div>
      </div>
  </div>
   <!-- Input para seleccionar la imagen -->
   <input type="file" id="fileInput" accept="image/*" capture="camera" style="display: none;">
   <!-- Modal de Previsualización -->
    <div id="previewModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1050; justify-content: center; align-items: center;">
       <div style="position: relative; padding: 20px; max-width: 90%; max-height: 90%; width: auto; height: auto;">
          <center><img id="preview" src="#" alt="Image Preview" style="width: auto; height: 50vh !important; border-radius: 8px;max-width: 70vw;"></center> 
           <div class="row">
               <div class="col-12 d-flex justify-content-center">
                   <button class="btn btn-sm btn-secondary" onclick="closePreview()" style="display:inline-flex;">Cerrar</button>
                   <button class="btn btn-sm btn-secondary" onclick="retryUpload()" style="display:inline-flex;">Tomar otra foto</button>
               <button class="btn btn-sm btn-danger"  onclick="submitImage()">Subir</button>
               <span style="position:fixed; color:white; top:5vh; width:70%; font-size: .8rem;">
                  <center>Nota: Esta es una previsualización. Al subirse, la imagen conservará su aspecto original.</center> 
               </span>
           </div>        
       </div>
   </div>
  
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
      integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>

  <script>
    function showGallery() {
     window.location.href = '/galery';
}
function showLocation(){
    window.location.href = '/ubicacion';
}
function showHome(){
    window.location.href = '/';
}
function showGifts(){
    window.location.href = '/regalos';
}

function showSpinner() {
    document.getElementById('loadingSpinner').style.display = 'flex';
}

function hideSpinner() {
    document.getElementById('loadingSpinner').style.display = 'none';
}

   document.getElementById('uploadTrigger').onclick = function() {
            document.getElementById('fileInput').click();
        };
        document.getElementById('fileInput').onchange = function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('preview').src = e.target.result;
                    document.getElementById('previewModal').style.display = 'flex';
                };
                reader.readAsDataURL(file);
            }
        };
        function closePreview() {
            document.getElementById('previewModal').style.display = 'none';
        }
        function retryUpload() {
            document.getElementById('fileInput').click();
        }

function submitImage() {
    var fileInput = document.getElementById('fileInput');
    if (fileInput.files.length > 0) {
        const file = fileInput.files[0];
        showSpinner();
        uploadImage(file);
    }
}

function uploadImage(file) {
    const formData = new FormData();
    formData.append('file', file);

    const xhr = new XMLHttpRequest();
    xhr.open('POST', '/upload', true);
    xhr.upload.onprogress = function(e) {
        if (e.lengthComputable) {
            const percentComplete = Math.round((e.loaded / e.total) * 100);
            console.log(percentComplete + '% uploaded');
        }
    };
    xhr.onload = function() {
         hideSpinner(); 
        if (xhr.status === 200) {
            Swal.fire({
                icon: 'success',
                title: '¡Subido con éxito!',
                text: 'Tu foto ha sido subida correctamente.'
            });
        } else {
            Swal.fire({
                icon: 'error',
                title: 'Error al subir',
                text: 'Hubo un problema al subir tu foto.'
            });
        }
        document.getElementById('previewModal').style.display = 'none';
    };
    xhr.send(formData);
}
     fetch('/api/config')
        .then(response => response.json())
        .then(config => {
            if (config) {
                // Asegúrate de que los datos existen
                const nombreApellido = config.titularCuenta || 'Celeste Macarena Chacon';
                    const cbuAlias = config.alias || 'chaconceleste.12';
                    const cbu = config.cbu || '0000003100032441598646';

                    // Mostrar datos en los botones correspondientes
                    document.getElementById('copyNombreApellido').innerText = nombreApellido;
                    document.getElementById('copyCbuAlias').innerText = cbuAlias;
                    document.getElementById('copyCbu').innerText = cbu;

                    // Configurar la funcionalidad de los botones para copiar al portapapeles
                    document.getElementById('copyNombreApellido').addEventListener('click', function(event) {
                    copyToClipboard(nombreApellido, event.target);
                });

                document.getElementById('copyCbuAlias').addEventListener('click', function(event) {
                    copyToClipboard(cbuAlias, event.target);
                });

                document.getElementById('copyCbu').addEventListener('click', function(event) {
                    copyToClipboard(cbu, event.target);
                }); 
                }
            });
            
        
     // Función para copiar al portapapeles
function copyToClipboard(text, button) {
    navigator.clipboard.writeText(text)
        .then(() => {
          if(text === 'Ciro Matias Metral'){
            
            button.innerText = 'Con el nombre?? XD';
          }else{
            
            button.innerText = 'Copiado';
          }
            // Cambiar el texto del botón a "Copiado"

            // Volver a mostrar el texto original después de 3 segundos
            setTimeout(() => {
                button.innerText = text;
            }, 3000);
        })
        .catch(err => {
            console.error('Error al copiar al portapapeles: ', err);
        });
}

// Asignar eventos a los botones


    
    function checkOrientation() {
      if (window.innerWidth > window.innerHeight) {
        document.getElementById("landscape-overlay").style.display = "block";
        document.getElementById("content").style.display = "none";
      } else {
        document.getElementById("landscape-overlay").style.display = "none";
        document.getElementById("content").style.display = "block";
      }
    }

    window.addEventListener("resize", checkOrientation);
    window.addEventListener("load", checkOrientation);
    window.addEventListener("orientationchange", checkOrientation);


    // Función para ajustar la altura de la lista de regalos
    function adjustGiftListHeight() {
      const header = document.querySelector('.header');
      const menu = document.querySelector('.card');
      const giftListContainer = document.querySelector('.gift-list-container');

      const availableHeight = window.innerHeight - header.offsetHeight - menu.offsetHeight;
      giftListContainer.style.maxHeight = `${availableHeight}px`;
    }

    // Ajustar la altura de la lista al cargar la página y al redimensionar la ventana
    window.addEventListener('load', adjustGiftListHeight);
    window.addEventListener('resize', adjustGiftListHeight);

let cbu = "0000003100032441598646";
let alias = "chaconceleste.12";
let titular = "Celeste Macarena Chacon";

// Función para copiar texto al portapapeles y mostrar toast
function copyToClipboardFallback(textElement) {
    // Mostrar el input con el valor a copiar
    textElement.style.display = 'block';
    textElement.select();
    document.execCommand('copy');
    textElement.style.display = 'none';
    toastr.success('Texto copiado manualmente al portapapeles');
}
function fetchAccountDetails() {
    fetch('/api/config')
        .then(response => response.json())
        .then(config => {
            if (config) {
                cbu = config.cbu || "0000003100032441598646";
                alias = config.alias || "chaconceleste.12";
                titular = config.titularCuenta || "Celeste Macarena Chacon";

                // Actualizar el contenido del blockquote usando class
                document.querySelector('.cbu').innerText = cbu;
                document.querySelector('.alias').innerText = alias;
                document.querySelector('.titular').innerText = titular;

            document.querySelector('.cbu').addEventListener('click', () => {
                  try {
                      navigator.clipboard.writeText(cbu).then(() => {
                          toastr.success('CBU copiado al portapapeles');
                      }).catch(() => {
                          copyToClipboardFallback(document.querySelector('.cbu-input'));
                      });
                  } catch (err) {
                      copyToClipboardFallback(document.querySelector('.cbu-input'));
                  }
              });

            document.querySelector('.alias').addEventListener('click', () => {
                try {
                    navigator.clipboard.writeText(alias).then(() => {
                        toastr.success('Alias copiado al portapapeles');
                    }).catch(() => {
                        copyToClipboardFallback(document.querySelector('.alias-input'));
                    });
                } catch (err) {
                    copyToClipboardFallback(document.querySelector('.alias-input'));
                }
            });
            
            }
        })
        .catch(error => {
            console.error('Error al cargar configuración:', error);
        });
}

function openDonationModal(giftId) {
    const giftElement = document.querySelector(`[data-gift-id="${giftId}"]`);
    const imageUrl = giftElement.querySelector('img').src;
    const priceText = giftElement.querySelector('.price').innerText;
    const price = parseFloat(priceText.replace(/[^0-9,-]+/g, "").replace(",", ""));

    // Fetch para obtener el porcentaje y el monto donado del regalo antes de abrir el modal
    fetch(`/api/gift_percentage/${giftId}`)
        .then(response => response.json())
        .then(data => {
            let percentage = 0;
            let donatedAmount = 0;

            if (data.success) {
                percentage = Math.floor(data.percentage);
                donatedAmount = data.donatedAmount || 0;
            }

            const remainingAmount = price - donatedAmount;

            let donationMessage = '';

            if (donatedAmount === 0) {
                donationMessage = `<p class="text-primary">Este regalo aún no recibió donaciones</p>`;
            } else if (remainingAmount === 0) {
                donationMessage = `<p class="text-primary">Este regalo está completo <i class="material-icons">sentiment_very_satisfied</i></p>`;
            } else {
                donationMessage = `
                    <p>Solo queda: <span class="text-primary">$${remainingAmount}</span></p>
                `;
            }

            // Verificar si el regalo ya está completo
            if (percentage >= 100) {
                Swal.fire({
                    icon: 'info',
                    title: 'Gracias!',
                    text: 'Este regalo ya está completo :)'
                });
                return; // Salir de la función si el regalo ya está completo
            }

           
            // Si el regalo no está completo, abrir el modal de donación
            Swal.fire({
                title: 'Donar a ' + giftId,
                html: `
                    <img src="${imageUrl}" alt="Imagen del regalo" style="width: 100px; height: 100px;">
                    <p><strong>${priceText}</strong></p>
                    <p class="text-muted">
                        Querida familia y amigos,
                        Estamos muy emocionados de que puedan acompañarnos en este día tan especial. Cada uno de ustedes ha sido una parte fundamental de nuestras vidas, y nos sentimos bendecidos de contar con su presencia en nuestra boda.
                        Nos casamos con lo más importante: nuestro amor incondicional. Al igual que muchos de ustedes, comenzamos esta nueva etapa sin nada, pero llenos de esperanza y sueños de construir nuestro propio hogar. Con su cariño y apoyo, estamos seguros de que lo lograremos.
                        Besos a todos, y estamos deseando disfrutar juntos este momento tan especial.
                    </p>
                    ${donationMessage}
                    <input type="text" id="donorName" class="swal2-input" placeholder="Tu nombre" style="text-transform: uppercase;" required>
                    <div class="form-group">
                        <label>Tipo de pago:</label>
                        <div>
                            <input type="radio" id="efectivo" name="paymentType" value="Efectivo" required>
                            <label for="efectivo">Efectivo</label>
                            <input type="radio" id="transferencia" name="paymentType" value="Transferencia" required>
                            <label for="transferencia">Transferencia</label>
                        </div>
                    </div>
                    <div id="transferInfo" style="display:none; margin-top:-.5rem;">
                        <blockquote style="font-size:9px">
                            <p class="small" style="margin-top:-.3rem">CBU: 
                                <strong class="cbu" style="cursor: pointer;">0000003100032441598646</strong>
                            </p>
                            <p class="small" style="margin-top:-.3rem">ALIAS: 
                                <strong class="alias" style="cursor: pointer;">chaconceleste.12</strong>
                            </p>
                            <footer class="small" style="margin-top:-.3rem">Transferir al titular: 
                                <cite class="titular">Celeste Macarena Chacon</cite>
                            </footer>
                        </blockquote>
                    </div>
                    <input type="number" id="donationAmount" class="swal2-input" placeholder="Monto a donar" min="1" step="1" required>
                `,
                showCancelButton: true,
                confirmButtonText: 'Donar',
                didOpen: () => {
                   
                    const transferRadio = Swal.getPopup().querySelector('#transferencia');
                    const cashRadio = Swal.getPopup().querySelector('#efectivo');
                    const transferInfo = Swal.getPopup().querySelector('#transferInfo');
                    // Llamar a la función para cargar los detalles de la cuenta
                    fetchAccountDetails();
                    // Mostrar u ocultar la información de transferencia
                    transferRadio.addEventListener('change', () => {
                        if (transferRadio.checked) {
                            transferInfo.style.display = 'block';
                        }
                    });

                    cashRadio.addEventListener('change', () => {
                        if (cashRadio.checked) {
                            transferInfo.style.display = 'none';
                        }
                    });
                },
                preConfirm: () => {
                    const donorName = Swal.getPopup().querySelector('#donorName').value.trim().toUpperCase();
                    const paymentType = Swal.getPopup().querySelector('input[name="paymentType"]:checked');
                    let donationAmount = Swal.getPopup().querySelector('#donationAmount').value.trim();

                    donationAmount = Math.floor(parseFloat(donationAmount));

                    if (!donorName) {
                        Swal.showValidationMessage('El nombre es obligatorio');
                        return null;
                    }

                    if (!paymentType) {
                        Swal.showValidationMessage('Debes seleccionar un tipo de pago');
                        return null;
                    }

                    if (!donationAmount || donationAmount <= 0) {
                        Swal.showValidationMessage('El monto de la donación debe ser mayor a 0');
                        return null;
                    }

                    return {
                        donorName,
                        paymentType: paymentType.value,
                        donationAmount: donationAmount,
                        giftPrice: price
                    };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const donationData = {
                        giftId: giftId,
                        donorName: result.value.donorName,
                        paymentType: result.value.paymentType,
                        donationAmount: result.value.donationAmount,
                        giftPrice: result.value.giftPrice
                    };
                    submitDonation(donationData);
                }
            });
        })
        .catch(error => {
            console.error(`Error al obtener el porcentaje del regalo ${giftId}:`, error);
            Swal.fire('Error', 'Hubo un problema al procesar la donación. Inténtalo de nuevo.', 'error');
        });
}

// Evitar decimales directamente en el input
document.addEventListener('input', function (event) {
    if (event.target.id === 'donationAmount') {
        event.target.value = event.target.value.replace(/[^0-9]/g, ''); // Solo permitir números enteros
    }
});




function submitDonation(donationData) {
    fetch('/api/donate', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(donationData)
    })
    .then(response => {
        if (!response.ok) {
            return response.json().then(errData => {
                throw new Error(errData.message || 'Ocurrió un error al procesar la donación');
            });
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            Swal.fire({
                icon: 'success',
                title: '¡Gracias!',
                text: 'Tu donación ha sido registrada con éxito.'
            }).then(() => {
                location.reload();  // Recargar el módulo/página
            });
        } else {
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: data.message || 'Hubo un problema al registrar tu donación. Inténtalo de nuevo.'
            }).then(() => {
                location.reload();  // Recargar el módulo/página
            });
        }
    })
    .catch(error => {
        console.error('Error:', error);
        Swal.fire({
            icon: 'error',
            title: 'Error',
            text: error.message || 'Hubo un problema al registrar tu donación. Inténtalo de nuevo.'
        }).then(() => {
            location.reload();  // Recargar el módulo/página
        });
    });
}


function updateGiftPercentages() {
    const giftElements = document.querySelectorAll('[data-gift-id]');
    const giftIds = Array.from(giftElements).map(element => element.getAttribute('data-gift-id'));
    
    giftIds.forEach(giftId => {
        // Special case for microondas - set to 100% directly
        if (giftId === 'microondas') {
            const donutElement = document.querySelector(`[data-gift-donut-id="microondas"]`);
            if (donutElement) {
                const donutSegment = donutElement.querySelector('.donut-segment-primary');
                const donutText = donutElement.querySelector('.donut-percent');
                
                if (donutSegment && donutText) {
                    donutText.textContent = '100%';
                    donutSegment.setAttribute('stroke-dasharray', '100 0');
                    
                    // Update the donation button to show it's complete
                    const giftContainer = document.querySelector(`[data-gift-id="microondas"]`);
                    const donateButton = giftContainer.querySelector('.donate');
                    if (donateButton) {
                        donateButton.textContent = 'COMPLETADO';
                        donateButton.parentElement.style.backgroundColor = '#e9ecef';
                        donateButton.parentElement.style.cursor = 'default';
                        // Remove the click event
                        donateButton.parentElement.onclick = (e) => {
                            e.preventDefault();
                            Swal.fire({
                                icon: 'info',
                                title: 'Regalo Completado',
                                text: '¡Gracias! Este regalo ya está completo :)'
                            });
                        };
                    }
                }
            }
            return; // Skip the fetch for microondas
        }
        
        // Regular fetch for other gifts
        fetch(`/api/gift_percentage/${giftId}`)
            .then(response => response.json())
            .then(data => {
                let percentage = 0;
                
                if (data.success) {
                    percentage = Math.floor(data.percentage);
                }
                
                const donutElement = document.querySelector(`[data-gift-donut-id="${giftId}"]`);
                
                if (donutElement) {
                    const donutSegment = donutElement.querySelector('.donut-segment-primary');
                    const donutText = donutElement.querySelector('.donut-percent');
                    
                    if (donutSegment && donutText) {
                        donutText.textContent = `0%`; 
                        donutSegment.setAttribute('stroke-dasharray', `0 100`);
                        animateDonut(donutSegment, donutText, percentage);
                    } else {
                        console.error(`Elementos del donut no encontrados para el regalo ${giftId}`);
                    }
                } else {
                    console.error(`Donut container no encontrado para el regalo ${giftId}`);
                }
            })
            .catch(error => {
                console.error(`Error al obtener el porcentaje del regalo ${giftId}:`, error);
            });
    });
}

window.addEventListener('load', updateGiftPercentages);

function animateDonut(donutSegment, donutText, targetPercentage) {
    const duration = 2000; // Duración de la animación en milisegundos
    const frameRate = 30; // Cuadros por segundo
    const totalFrames = Math.round((duration / 1000) * frameRate);
    let currentFrame = 0;

    function animate() {
        currentFrame++;
        const progress = Math.min(currentFrame / totalFrames, 1);
        const percentage = Math.floor(progress * targetPercentage);

        // Actualiza el stroke-dasharray para la animación del círculo
        donutSegment.setAttribute('stroke-dasharray', `${percentage} ${100 - percentage}`);
        
        // Actualiza el texto del porcentaje
        donutText.textContent = `${percentage}%`;

        if (currentFrame < totalFrames) {
            requestAnimationFrame(animate);
        }
    }

    requestAnimationFrame(animate);
}


  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</html>
